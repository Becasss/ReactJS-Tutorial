import { useReducer} from 'react';

const initialState = [];

function reducer(state, action) {
    switch (action.type) {
        case "add":
        return[...state, {id:Date.now(), text:action.text, completed:fasle}];
        case "toggle":
        return state.map(tod => 
        tod.id === action.id ? {...todo, completed: !todo.completed} : todo);
        case "remove":
        return state.filter(todo => todo.id !== action.id);
        default:
        return state;
    }
}

function TodoApp(){
    const [todos, dispatch] = useReducer(reducer,initialState);
    const addTodo = () => {
        const text = prompt ("Enter a tod-do:");
        if(text) dispatch({type:"add", text});
    };

    return(
        <div>
            <button onClick={addTodo}>Add To Do</button>
            <ul>
                {todos.map(tod0 =>(
                    <li key = {todo.id} style={{textDecoration: todo.completed ? "line-through" : "none"}}>
                        {todo.text}
                        <button onClick={() => disptach({type:"toggle", id:todo.id})}>Toggle</button>
                        <button onClick={() => dispatch({type:"remove", id:todo.id})}>Remove</button>
                        </li>
                ))}
            </ul>
        </div>
    );
    }

    export default TodoApp;
